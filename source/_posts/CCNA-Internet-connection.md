---
title: CCNA-Internet connection
tags: [CCNA,笔记]
date: 2014-05-19 23:32:26
keywords: [串行接口封装,PPP协议,Frame Relay,帧中继协议]
---

学习过程中的笔记，比较零散

<!--more-->

#### 主流的广域网连接

包交换：运行商可以将一条线路租给多个用户，因为他们的网络需要量小。

DSL（数字用户线），家庭终端用户和中小型企业（ADSL非对称用户线，意思是上行流量和下行流量不相等，下行速率较高，上行速率较低）ADSL技术实际上只应用于家庭ADSL猫和网络运营商的DSLAM的边界部分，而运营商内部还是高速的交换网络。是一层技术。解决长距离传输问题

再上层是PPP协议

DSL的优点：

速度较快，可以达到８Ｍ

可同时进行声音和数据传输

可以２４小时在线

可以和传统的模拟电话线路兼容

缺点：

限制多

需要本地电话公司的支持

开放的线路，安全性较差

#### 串行接口封装

Circuit switching 电路交换：在通信之前，要先建立连接，建立好之后线路专属于某以用户。但是连接速率低，通常是在异步线缆上进行，通常基于PSTN（ puclic switched telephon newwork公共电话交换网络)：简单，可用性高，费用低

 

租用线路（leased Line）：速度快，费用高。线路是专门为用户预留的

 

WAN connection bandwidth：串行接口要配置始终频率，一般是在DCE端进行配置，DTE端是用户端（实验室环境下两台路由器之间的线缆是模拟的广域网网云的环境。）

DTE和DCE端是线缆决定的，线缆的DCE端插到哪个端口，哪边就是DCE端。

Point－to－point　considerations

优点：

简单、质量高、可用性高；

缺点：

费用高、灵活性差

思科的设备和别的设备在二层封装是不一样的，假如思科的路由器和华为的路由器Ｗａｎ口相连，是连接不通的，因为思科的二层封装是修改过的。

修改接口的封装类型命令如下：

Interface　s０／０／０（要修改的接口）

Encapsulation　封装类型（Ｈｄｌｃ　PPP　Ｓｔｕｎ等）

默认是hdlc

不同厂商的设备相连一半时PPP协议

PPP协议：认证、压缩、多链路、回拨；

 

#### Frame　relay（帧中继协议）：

工作在用户端和运营商边界的协议

ATM 异步传输模式 属于信源交换   将数据分为53字节的定长信源；通常是在硬件之内完成，通常运行于运营商内部高速网络

ISDN。。。。大概只出现过一年的时间左右，就过度到adsl了

工作在用户端到运营商的边界处（称为最后一公里）

使用了虚电路的概念

在一根电缆上通过多路复用技术划分出virtual circuits （虚拟电路）租用给多个用户，用户感觉就像租用了专线一样

虚拟电路分为临时线路（SVC）和永久线路（PVC）

帧中继通过DLCI号（只具有本地意义，不一定全局唯一，通常情况下做成全局唯一的）来分辨每个虚拟电路（二层编址技术  0-1024）

帧中继有两种封装形式：cisco（思科设备私有的）和IETF封装

LIM：本地管理接口，两个设备之间使用的信令标准。有三种类型：

Cisco  ansi  Q933a  可以理解为设备之间的语言

配置的时候注意设备间使用的封装类型和信令标准

帧中继 是NBMA网络，不支持广播和组播 

帧中继通过逆向ARP解决IP-->DLCI号的映射

帧中继互联拓扑结构：

全互联、部分互联、星形连接

可以将一个帧中继接口划分为多个子接口：可以将线路隔离，可以解决水平分割问题；

点对点子接口可以解决水平分割问题，但是浪费IP地址

多点子接口不可以解决水平分割问题，但是不浪费IP地址

#### PPP协议

PPP协议可以说是应用最广泛的广域网二层协议，分为两个部分：NCP（网络控制协议，在三层与二层做兼容转换），LCP（链路控制协议，建立拆除线路）；

PPP协议的特点：（LCP的实现）（不同厂商的设备可以连接）

1 支持认证（2层的认证机制）

2 支持回拨（通常用于企业集中化管理账单）

3支持压缩（启用压缩之后，所有通过线缆的数据都是被压缩，相当于侧面提高了传输速率）

4支持多链路（允许将多个物理线路捆绑成一个逻辑线路，提高传输s速率）

《TCP/IP协议详解》80年代的书

PPP连接建立的过程：

1 请求建立连接；

2 LCP控制连接（可能会有认证）

3 NCP处理；

PPP认证分为两种：PAP（明文认证）和CHAP（挑战握手认证协议（三次握手双向认证））使用的是路由器的全局用户名密码

 

配置命令：（线路两端的封装协议必须一样）

Interface　ｓ０／０／０

Encapsulation　ppp

认证：

①PAP认证（有发起方和接收方）

在全局模式下：

Username name password passwd

在要启用认证的接口上：

Ppp authentication pap

在线路另一端

全局配置模式下：

Ppp pap sent-usernam name password passed

②CHAP认证：

建立的用户名是对端的主机名，密码必须要一样

在一端：

全局配置模式：

Username　对端的主机名　password　密码

Ppp　authentication　CHAP

另一端相同的配置

查看过程可用　debug　ppp　negotiation

#### 交换基础

HUB连接：会产生数据冲突

 

Bridges（网桥）：具有二层的过滤功能（基于二层的mac地址进行过滤），（还是属于软件处理）可以互联多个网段。

 

switches（交换机）：属于硬件处理，可以线速转发。

划分了多个冲突域，每个接口下的终端设备属于一个独立的冲突域，不会产生数据冲突。

全双工模式，可以同时进行收和发允许线缆两端速度不一样。

可以通过mac table 对数据进行智能转发，而且mac table是可以学习的

交换机刚开机的时候mac table是空的，在转发过程中进行学习。当不知道目标mac地址在哪的时候，会把数据从其余的接口泛洪出去。对局域网的组播和广播数据进行泛洪操作。

特点：

多接口，很高冗余性，线速转发，可以混合不同的接口速度，快速转发

三种工作模式：

直通交换，无碎片交换，存储转发交换

#### VLAN和Trunks

划分冲突域，具有二层隔离性，一个vlan相当于一个冲突域，等于一个局域网。vlan隔离之后是两个子网，达到路由的隔离性。

不同vlan通信需要通过三层设备。

vlan的划分是在接口上划分的，不同的vlan是不同的逻辑子网

划分出来的vlan就相当于两个处于不同网段的交换机

vlan可以隔离广播域。

Trunks 允许不同交换机的相同Vlan通信，允许在一根线路上承载多个vlan信息，这个接口就是Trunk接口。

所有没打标记的数据包，统一划给native Vlan

